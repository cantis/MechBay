{% extends 'base.html' %}
{% block content %}
<h2>Add Miniature{% if duplicate_of %} (Duplicated from ID {{ duplicate_of.id }}){% endif %}</h2>
<form method="post" action="{{ url_for('miniatures.add') }}" class="row g-3">
    <div class="col-md-2">
        <label class="form-label">Series *</label>
        {% set series_prefill = (prefill.series if prefill is defined and prefill.series is not none else 'A') %}
        <select name="series" required class="form-select">
            <option value="A" {% if series_prefill=='A' %}selected{% endif %}>A - Mechs</option>
            <option value="B" {% if series_prefill=='B' %}selected{% endif %}>B - Armour/Infantry/Support</option>
            <option value="C" {% if series_prefill=='C' %}selected{% endif %}>C - Other</option>
        </select>
    </div>
    <div class="col-md-2">
        <label class="form-label">Unique ID (Integer) *</label>
        <input name="unique_id" type="number" min="1" required class="form-control" placeholder="e.g. 1001"
            value="{% if prefill is defined and prefill.unique_id is not none %}{{ prefill.unique_id }}{% endif %}" />
    </div>
    <div class="col-md-2">
        <label class="form-label">Prefix *</label>
        <input name="prefix" required class="form-control" placeholder="WHM"
            value="{% if prefill is defined and prefill.prefix %}{{ prefill.prefix }}{% endif %}" />
    </div>
    <div class="col-md-3">
        <label class="form-label">Chassis *</label>
        <input name="chassis" required class="form-control" placeholder="Warhammer"
            value="{% if prefill is defined and prefill.chassis %}{{ prefill.chassis }}{% endif %}" />
    </div>
    <div class="col-md-3">
        <label class="form-label">Type *</label>
        <select name="type" required class="form-select">
            <option value="">-- choose --</option>
            {% set type_prefill = (prefill.type if prefill is defined else '') %}
            {% for t in ['Mech','Vehicle','Infantry','VTOL','Support'] %}
            <option value="{{ t }}" {% if type_prefill==t %}selected{% endif %}>{{ t }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col-md-3">
        <label class="form-label">Status</label>
        {% set status_prefill = (prefill.status if prefill is defined else '') %}
        <select name="status" class="form-select">
            {% for s in ['','New','Primed','Detail','Based','Finished'] %}
            <option value="{{ s }}" {% if status_prefill==s %}selected{% endif %}>{{ s or '--' }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col-md-3">
        <label class="form-label">Tray</label>
        <input name="tray_id" class="form-control" placeholder="T1"
            value="{% if prefill is defined and prefill.tray_id %}{{ prefill.tray_id }}{% endif %}" />
    </div>
    <div class="col-12">
        <label class="form-label">Notes</label>
        <textarea name="notes" rows="3" class="form-control"
            placeholder="Optional">{% if prefill is defined and prefill.notes %}{{ prefill.notes }}{% endif %}</textarea>
    </div>
    <div class="col-12 d-flex gap-2">
        <button class="btn btn-primary" type="submit">Add</button>
        <a class="btn btn-secondary" href="{{ url_for('miniatures.list_miniatures') }}">Cancel</a>
    </div>
</form>
{% endblock %}